(function(e){function t(t){for(var o,i,s=t[0],c=t[1],l=t[2],f=0,u=[];f<s.length;f++)i=s[f],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&u.push(n[i][0]),n[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);p&&p(t);while(u.length)u.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],o=!0,s=1;s<a.length;s++){var c=a[s];0!==n[c]&&(o=!1)}o&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var o={},n={app:0},r=[];function i(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=o,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(a,o,function(t){return e[t]}.bind(null,o));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/R6OB/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var p=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"019d":function(e,t,a){e.exports=a.p+"img/4.af245bc4.jpg"},"0422":function(e,t,a){e.exports=a.p+"img/2.ba4bd2e5.jpg"},"04cf":function(e,t,a){e.exports=a.p+"img/3.3b743eac.jpg"},"087a":function(e,t,a){e.exports=a.p+"img/1.ecc3c2e2.jpg"},"08a5":function(e,t,a){e.exports=a.p+"img/3.9c67c101.jpg"},"0db4":function(e,t,a){e.exports=a.p+"img/3.86f4a29e.jpg"},"0fda":function(e,t,a){e.exports=a.p+"img/2.9b1f4cdd.jpg"},"12bb":function(e,t,a){e.exports=a.p+"img/1.5e04c60f.jpg"},1622:function(e,t,a){e.exports=a.p+"img/3.3aa6f130.jpg"},1690:function(e,t,a){e.exports=a.p+"img/3.2ef32d76.jpg"},"16de":function(e,t,a){e.exports=a.p+"img/5.26b8cc98.jpg"},1975:function(e,t,a){e.exports=a.p+"img/3.9f83dbed.jpg"},"1b7b":function(e,t,a){e.exports=a.p+"img/1.10329578.jpg"},"1d8b":function(e,t,a){"use strict";var o=a("208b"),n=a.n(o);n.a},"1da8":function(e,t,a){e.exports=a.p+"img/1.70f611d1.jpg"},"1ee6":function(e,t,a){e.exports=a.p+"img/1.0c7d79f8.jpg"},"1fbf":function(e,t,a){e.exports=a.p+"img/2.8914316b.jpg"},"208b":function(e,t,a){},"234a":function(e,t,a){e.exports=a.p+"img/3.6c8f6c7e.jpg"},2907:function(e,t,a){e.exports=a.p+"img/4.47ca905b.jpg"},"2c61":function(e){e.exports=JSON.parse('{"lang":"中文","tip":{"nomap":"点击左上角按钮选择地图"},"map":{"bank":{"name":"银行","floors":["地下室","1","2","屋顶"]},"bartlett":{"name":"巴特雷特大学","floors":["1","2","屋顶"]},"border":{"name":"边境","floors":["1","2","屋顶"]},"chalet":{"name":"木屋","floors":["地下室","1","2","屋顶"]},"clubhouse":{"name":"俱乐部会所","floors":["地下室","1","2","屋顶"]},"coastline":{"name":"海岸线","floors":["1","2","屋顶"]},"consulate":{"name":"领事馆","floors":["地下室","1","2","屋顶"]},"favela":{"name":"贫民窟","floors":["菜市场","1","2","3","屋顶"]},"fortress":{"name":"要塞","floors":["1","2","3","屋顶"]},"hereford":{"name":"赫里福基地","floors":["1","2","3","4","屋顶"]},"house":{"name":"芝加哥豪宅","floors":["地下室","1","2","屋顶"]},"kafe":{"name":"杜斯妥也夫斯基咖啡馆","floors":["1","2","3","屋顶"]},"kanal":{"name":"运河","floors":["通道","1","2","3","屋顶"]},"oregon":{"name":"俄勒冈乡间屋宅","floors":["1","2","3","4","屋顶"]},"outback":{"name":"荒漠服务站","floors":["1","2","屋顶"]},"plane":{"name":"总统专机","floors":["1","2","3","屋顶"]},"skyscraper":{"name":"摩天大楼","floors":["1","2","屋顶"]},"themepark":{"name":"主题公园","floors":["1","2","屋顶"]},"tower":{"name":"高塔","floors":["1","2","3","4","屋顶"]},"villa":{"name":"庄园","floors":["地下室","1","2","屋顶"]},"yacht":{"name":"游艇","floors":["1","2","3","4","屋顶"]}}}')},"2d67":function(e,t,a){},"320e":function(e,t,a){e.exports=a.p+"img/2.6f4187ef.jpg"},"32f2":function(e,t,a){e.exports=a.p+"img/4.62ec0cb1.jpg"},"32f4":function(e,t,a){e.exports=a.p+"img/5.5a0cc004.jpg"},"3f19":function(e,t,a){e.exports=a.p+"img/2.ac472bc5.jpg"},"41d8":function(e,t,a){e.exports=a.p+"img/4.4090e98a.jpg"},"458f":function(e,t,a){e.exports=a.p+"img/5.93df09f8.jpg"},4642:function(e,t,a){e.exports=a.p+"img/3.b1c45ce4.jpg"},"48b2":function(e,t,a){e.exports=a.p+"img/3.93b45801.jpg"},"49f8":function(e,t,a){var o={"./en.json":"edd4","./zh-cn.json":"2c61"};function n(e){var t=r(e);return a(t)}function r(e){if(!a.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=r,e.exports=n,n.id="49f8"},"4ab4":function(e,t,a){e.exports=a.p+"img/1.905be3cc.jpg"},"4bfa":function(e,t,a){e.exports=a.p+"img/3.f58487ef.jpg"},"4e45":function(e,t,a){e.exports=a.p+"img/3.9fee25e7.jpg"},"4f23":function(e,t,a){e.exports=a.p+"img/1.596b6064.jpg"},"531d":function(e,t,a){var o={"./bank/1.jpg":"a4be","./bank/2.jpg":"8265","./bank/3.jpg":"234a","./bank/4.jpg":"ae49","./bartlett/1.jpg":"4f23","./bartlett/2.jpg":"fa78","./bartlett/3.jpg":"75d4","./border/1.jpg":"1ee6","./border/2.jpg":"ee3e","./border/3.jpg":"1975","./chalet/1.jpg":"087a","./chalet/2.jpg":"8320","./chalet/3.jpg":"4642","./chalet/4.jpg":"b26a","./clubhouse/1.jpg":"a139","./clubhouse/2.jpg":"641a","./clubhouse/3.jpg":"04cf","./clubhouse/4.jpg":"a438","./coastline/1.jpg":"a9c1","./coastline/2.jpg":"c6cdf","./coastline/3.jpg":"d2f8","./consulate/1.jpg":"a428","./consulate/2.jpg":"ce07","./consulate/3.jpg":"1622","./consulate/4.jpg":"2907","./favela/1.jpg":"f36e","./favela/2.jpg":"8517","./favela/3.jpg":"48b2","./favela/4.jpg":"84e1","./favela/5.jpg":"d712","./fortress/1.jpg":"d8ca","./fortress/2.jpg":"da1e","./fortress/3.jpg":"4e45","./fortress/4.jpg":"b166","./hereford/1.jpg":"eb04","./hereford/2.jpg":"320e","./hereford/3.jpg":"1690","./hereford/4.jpg":"d48f","./hereford/5.jpg":"16de","./house/1.jpg":"12bb","./house/2.jpg":"9937","./house/3.jpg":"56c4","./house/4.jpg":"9c8e","./kafe/1.jpg":"a12a","./kafe/2.jpg":"917a","./kafe/3.jpg":"4bfa","./kafe/4.jpg":"41d8","./kanal/1.jpg":"4ab4","./kanal/2.jpg":"f68b","./kanal/3.jpg":"72c5","./kanal/4.jpg":"8661","./kanal/5.jpg":"b400","./oregon/1.jpg":"1da8","./oregon/2.jpg":"0422","./oregon/3.jpg":"08a5","./oregon/4.jpg":"c6f0","./oregon/5.jpg":"458f","./outback/1.jpg":"1b7b","./outback/2.jpg":"bc0c","./outback/3.jpg":"56a6","./plane/1.jpg":"dfa1","./plane/2.jpg":"e10e","./plane/3.jpg":"6717","./plane/4.jpg":"019d","./skyscraper/1.jpg":"ba72","./skyscraper/2.jpg":"c8a4","./skyscraper/3.jpg":"0db4","./themepark/1.jpg":"dcf0","./themepark/2.jpg":"1fbf","./themepark/3.jpg":"c259","./tower/1.jpg":"74c5","./tower/2.jpg":"3f19","./tower/3.jpg":"6c41","./tower/4.jpg":"5711","./tower/5.jpg":"c5a1","./villa/1.jpg":"fe53","./villa/2.jpg":"cca1","./villa/3.jpg":"7efc","./villa/4.jpg":"32f2","./yacht/1.jpg":"dc4a","./yacht/2.jpg":"0fda","./yacht/3.jpg":"5699","./yacht/4.jpg":"7c25","./yacht/5.jpg":"32f4"};function n(e){var t=r(e);return a(t)}function r(e){if(!a.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=r,e.exports=n,n.id="531d"},5699:function(e,t,a){e.exports=a.p+"img/3.013c97a0.jpg"},"56a6":function(e,t,a){e.exports=a.p+"img/3.0794474d.jpg"},"56c4":function(e,t,a){e.exports=a.p+"img/3.2e6c8acc.jpg"},5711:function(e,t,a){e.exports=a.p+"img/4.a0d3a5b5.jpg"},"5c0b":function(e,t,a){"use strict";var o=a("9c0c"),n=a.n(o);n.a},"601e":function(e,t,a){"use strict";var o=a("a15b"),n=a.n(o);n.a},"641a":function(e,t,a){e.exports=a.p+"img/2.54bebcce.jpg"},6717:function(e,t,a){e.exports=a.p+"img/3.064a22ae.jpg"},"6c41":function(e,t,a){e.exports=a.p+"img/3.339d1e94.jpg"},"72c5":function(e,t,a){e.exports=a.p+"img/3.4e4d6bbc.jpg"},"74c5":function(e,t,a){e.exports=a.p+"img/1.3ee85145.jpg"},"75d4":function(e,t,a){e.exports=a.p+"img/3.30e72541.jpg"},"7c25":function(e,t,a){e.exports=a.p+"img/4.c7aba105.jpg"},"7efc":function(e,t,a){e.exports=a.p+"img/3.98747153.jpg"},"7fd3":function(e,t,a){},8265:function(e,t,a){e.exports=a.p+"img/2.8aa24800.jpg"},8320:function(e,t,a){e.exports=a.p+"img/2.805fccc8.jpg"},"83ac":function(e,t,a){"use strict";var o=a("2d67"),n=a.n(o);n.a},"84e1":function(e,t,a){e.exports=a.p+"img/4.f19d92b2.jpg"},8517:function(e,t,a){e.exports=a.p+"img/2.540a43c2.jpg"},8661:function(e,t,a){e.exports=a.p+"img/4.aec6cffb.jpg"},"917a":function(e,t,a){e.exports=a.p+"img/2.9075c8dd.jpg"},9937:function(e,t,a){e.exports=a.p+"img/2.84974370.jpg"},"9c0c":function(e,t,a){},"9c8e":function(e,t,a){e.exports=a.p+"img/4.654ccbf7.jpg"},a12a:function(e,t,a){e.exports=a.p+"img/1.8c1da4db.jpg"},a139:function(e,t,a){e.exports=a.p+"img/1.94bc394e.jpg"},a15b:function(e,t,a){},a428:function(e,t,a){e.exports=a.p+"img/1.8e5c8d0d.jpg"},a438:function(e,t,a){e.exports=a.p+"img/4.1635dcf9.jpg"},a4be:function(e,t,a){e.exports=a.p+"img/1.942c9ee9.jpg"},a9c1:function(e,t,a){e.exports=a.p+"img/1.4a6d6067.jpg"},ae49:function(e,t,a){e.exports=a.p+"img/4.eda70d43.jpg"},b166:function(e,t,a){e.exports=a.p+"img/4.2ddd6459.jpg"},b26a:function(e,t,a){e.exports=a.p+"img/4.11dbc2de.jpg"},b400:function(e,t,a){e.exports=a.p+"img/5.c40cc952.jpg"},ba72:function(e,t,a){e.exports=a.p+"img/1.c6062d91.jpg"},bc0c:function(e,t,a){e.exports=a.p+"img/2.fd462cfc.jpg"},c259:function(e,t,a){e.exports=a.p+"img/3.d9ccd68f.jpg"},c5a1:function(e,t,a){e.exports=a.p+"img/5.dfa373f2.jpg"},c6cdf:function(e,t,a){e.exports=a.p+"img/2.d3fb6ce1.jpg"},c6f0:function(e,t,a){e.exports=a.p+"img/4.0372b691.jpg"},c8a4:function(e,t,a){e.exports=a.p+"img/2.e61476de.jpg"},cca1:function(e,t,a){e.exports=a.p+"img/2.fdcc4113.jpg"},cd49:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),n=a("289d"),r=(a("5abe"),a("7591")),i=a.n(r),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:{"--vh":e.heightVar+"px"},attrs:{id:"app"}},[a("div",{staticClass:"main"},[a("aside",{staticClass:"nav"},[a("AppNav")],1),a("AppMap",{staticClass:"map"})],1),a("footer",{staticClass:"footer has-background-grey-lighter"},[a("a",{staticClass:"level-item icon-link",attrs:{href:"https://github.com/UnluckyNinja/R6OB/",target:"_blank"}},[a("b-icon",{attrs:{pack:"fab",icon:"github",type:"is-dark",size:"is-medium"}})],1),a("p",{staticClass:"level-item"},[e._v("©2020 UnluckyNinja")])])])},c=[],l=(a("7db0"),a("b64b"),a("2ca0"),a("d4ec")),p=a("bee2"),f=a("99de"),u=a("7e84"),g=a("262e"),d=a("9ab4"),b=a("60a3"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"nav nav-root"},[a("b-collapse",{staticClass:"nav-body has-background-white-ter",attrs:{open:e.isOpen,animation:"fade",position:"is-bottom"},on:{"update:open":function(t){e.isOpen=t}}},[a("Menu",{staticClass:"menu"})],1),a("div",{staticClass:"nav-handle",on:{click:function(t){e.isOpen=!e.isOpen}}},[a("b-button",{staticClass:"nav-button",attrs:{"icon-left":e.isOpen?"chevron-left":"bars",type:"is-dark"}})],1)],1)},m=[],v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu-root container"},[a("div",{staticClass:"panel"},[a("div",{staticClass:"panel-heading horizontal"},[a("div",{staticClass:"item"},[a("b-button",{attrs:{"icon-left":"map-marked-alt",type:"is-dark"},on:{click:function(t){e.isMapSelectorModalActive=!0}}})],1),e._m(0),a("LocalePicker",{staticClass:"item"})],1)]),a("div",{staticClass:"body"},[a("div",[e.$store.state.map?a("div",{staticClass:"level"},[a("h5",{staticClass:"level-item title has-text-centered is-4"},[e._v(e._s(e.$t("map."+e.$store.state.map.id+".name")))])]):a("div",{staticClass:"map-tip"},[a("p",[e._v(e._s(e.$t("tip.nomap")))])])]),e._l(this.$store.state.layers.slice().reverse(),(function(t){return a("div",{key:t.id,staticClass:"layer-control root"},[a("LayerControl",{attrs:{layer:t},on:{solo:function(t){return e.solo(t)},"update:layer-key":e.updateLayerKey}})],1)}))],2),a("b-modal",{attrs:{width:"80%",active:e.isMapSelectorModalActive},on:{"update:active":function(t){e.isMapSelectorModalActive=t}}},[a("MapSelector",{on:{selected:function(t){return e.changeMap(t)}}})],1)],1)},j=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item expanded"},[a("h1",{staticClass:"title"},[e._v("R6OB")])])}],y=(a("a623"),a("4160"),a("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},e._l(e.list,(function(t){return a("div",{key:t.id,staticClass:"container"},[a("div",{staticClass:"card",on:{click:function(a){return e.$emit("selected",t)}}},[a("figure",{staticClass:"image"},[a("img",{attrs:{width:"320px",height:"180px",src:e.publicPath+"img/maps/"+t.coverSrc,alt:""}}),a("figcaption",{staticClass:"is-size-4"},[e._v(e._s(e.$t("map."+t.id+".name")))])])])])})),0)}),k=[],x=(a("4de4"),a("baa5"),a("d81d"),a("fb6a"),a("d3b7"),a("ac1f"),a("466d"),a("1276"),a("ddb0"),["bank_cover.webp","bartlett_cover.jpg","border_cover.webp","chalet_cover.webp","clubhouse_cover.jpg","coastline_cover.webp","consulate_cover.jpg","favela_cover.webp","fortress_cover.webp","hereford_cover.webp","house_cover.webp","kafe_cover.jpg","kanal_cover.webp","oregon_cover.jpg","outback_cover.webp","plane_cover.jpg","skyscraper_cover.jpg","themepark_cover.webp","tower_cover.webp","villa_cover.webp","yacht_cover.webp"]),O=a("531d"),w=x.map((function(e){var t=/^(.*)_/;if(!t.test(e))throw"illegal map file name: ".concat(e);var a=e.match(t)[1],o=O.keys().filter((function(e){return e.startsWith("./".concat(a))})),n=o.map((function(e){return{id:_(e),mapid:a,image:O(e),layers:[]}}));return{id:a,coverSrc:e,floors:n}}));function _(e){var t=e.split("/").pop();t||(t=e);var a=t.lastIndexOf(".");return-1===a?t:t.slice(0,a)}var C=w,$=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(f["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.publicPath="/R6OB/",e}return Object(g["a"])(t,e),t}(b["c"]);d["a"]([Object(b["b"])({default:function(){return C}})],$.prototype,"list",void 0),$=d["a"]([Object(b["a"])({components:{}})],$);var M=$,L=M,R=(a("1d8b"),a("2877")),S=Object(R["a"])(L,y,k,!1,null,"cfaf4d28",null),P=S.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box small layer-control"},[a("b-field",{staticClass:"field level",attrs:{grouped:""}},[a("div",{staticClass:"control"},[a("b-checkbox",{attrs:{type:"is-dark"},model:{value:e.enabled,callback:function(t){e.enabled=t},expression:"enabled"}})],1),a("div",{staticClass:"control"},[a("b-button",{staticClass:"label has-text-centered",attrs:{type:"is-dark",outlined:""},on:{click:e.solo}},[e._v(e._s(e.$t("map."+this.layer.mapid+".floors["+(this.layer.id-1)+"]")))])],1),a("b-slider",{staticClass:"alpha-slider",attrs:{type:"is-dark",disabled:!this.layer.enabled,"custom-formatter":function(e){return e.toFixed(0)+"%"}},model:{value:e.alpha,callback:function(t){e.alpha=t},expression:"alpha"}})],1),a("b-field",{attrs:{grouped:""}},[a("b-field",[a("b-checkbox-button",{attrs:{size:"is-small",value:!0,disabled:""}},[a("div",[a("b-icon",{attrs:{icon:"video"}})],1)]),a("b-checkbox-button",{attrs:{size:"is-small",value:!0,disabled:""}},[a("div",[a("b-icon",{attrs:{icon:"border-style"}})],1)]),a("b-checkbox-button",{attrs:{size:"is-small",value:!0,disabled:""}},[a("div",[a("b-icon",{attrs:{icon:"project-diagram"}})],1)])],1),a("b-field",{attrs:{expanded:""}}),a("b-field",{attrs:{position:"is-right",grouped:""}},[a("b-checkbox-button",{attrs:{value:"false",type:"is-dark",size:"is-small"},model:{value:e.draggable,callback:function(t){e.draggable=t},expression:"draggable"}},[a("div",[a("b-icon",{attrs:{icon:"arrows-alt"}})],1)]),a("div",{staticClass:"control"},[a("b-button",{attrs:{type:"is-danger",size:"is-small","icon-left":"redo-alt"},on:{click:e.requestReset}})],1)],1)],1),this.layer.childs&&this.layer.childs.length>0?a("b-collapse",{attrs:{open:e.isOpen,animation:"fade"},on:{"update:open":function(t){e.isOpen=t}}},e._l(this.layer.childs,(function(e){return a("LayerControl",{key:e.id,attrs:{layer:e}})})),1):e._e()],1)},A=[],z=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(f["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.isOpen=!1,e}return Object(g["a"])(t,e),Object(p["a"])(t,[{key:"requestReset",value:function(){this.$emit("update:layer-key",this.layer,"requestReset",!0)}},{key:"solo",value:function(){this.$emit("solo",this.layer)}},{key:"enabled",get:function(){return this.layer.enabled},set:function(e){this.$store.commit("toggleLayer",this.layer)}},{key:"alpha",get:function(){return 100*this.layer.opacity},set:function(e){this.$emit("update:layer-key",this.layer,"opacity",e/100)}},{key:"draggable",get:function(){return!this.layer.draggable},set:function(e){this.$emit("update:layer-key",this.layer,"draggable",!e)}}]),t}(b["c"]);d["a"]([Object(b["b"])()],z.prototype,"layer",void 0),z=d["a"]([Object(b["a"])({components:{}})],z);var N=z,D=N,Z=(a("601e"),Object(R["a"])(D,E,A,!1,null,"6e17f8fc",null)),q=Z.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-dropdown",{attrs:{"aria-role":"list"},model:{value:e.locale,callback:function(t){e.locale=t},expression:"locale"}},[a("b-button",{staticClass:"button",attrs:{slot:"trigger",type:"is-info","icon-left":"language"},slot:"trigger"}),e._l(this.locales,(function(t){return a("b-dropdown-item",{key:t,attrs:{"aria-role":"listitem",value:t}},[e._v(e._s(e.$t("lang",t)))])}))],2)],1)},X=[],B=function(e){function t(){return Object(l["a"])(this,t),Object(f["a"])(this,Object(u["a"])(t).apply(this,arguments))}return Object(g["a"])(t,e),Object(p["a"])(t,[{key:"locales",get:function(){return Object.keys(this.$i18n.messages)}},{key:"locale",get:function(){return this.$i18n.locale},set:function(e){this.$i18n.locale=e,window.localStorage.locale=e}}]),t}(b["c"]);B=d["a"]([Object(b["a"])({components:{}})],B);var T=B,F=T,K=Object(R["a"])(F,H,X,!1,null,"1fc9e465",null),U=K.exports,Y=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(f["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.isMapSelectorModalActive=!1,e}return Object(g["a"])(t,e),Object(p["a"])(t,[{key:"changeMap",value:function(e){this.isMapSelectorModalActive=!1,this.$store.dispatch("updateMap",e)}},{key:"solo",value:function(e){var t=this;this.$store.commit("toggleLayer",{layer:e,enabled:!0}),this.$store.state.layers.forEach((function(a){a!==e&&t.$store.commit("toggleLayer",{layer:a,enabled:!1})}))}},{key:"updateLayerKey",value:function(e,t,a){if(this.$store.commit("changeLayerKey",{layer:e,key:t,value:a}),"draggable"===t&&(!0===a&&this.$store.commit("changeDraggable",!1),!1===a)){var o=this.$store.state.layers.every((function(e){return!1===e.draggable}));o&&this.$store.commit("changeDraggable",!0)}}}]),t}(b["c"]);Y=d["a"]([Object(b["a"])({components:{MapSelector:P,LayerControl:q,LocalePicker:U}})],Y);var I=Y,W=I,J=(a("83ac"),Object(R["a"])(W,v,j,!1,null,"5c3871a1",null)),V=J.exports,G=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(f["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.isOpen=!0,e}return Object(g["a"])(t,e),t}(b["c"]);G=d["a"]([Object(b["a"])({components:{Menu:V}})],G);var Q=G,ee=Q,te=(a("d491"),Object(R["a"])(ee,h,m,!1,null,"912af19c",null)),ae=te.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"map root has-background-black-bis",on:{wheel:function(t){return e.onZoom(t)}}},[a("v-stage",{ref:"konva",attrs:{config:e.konvaConfig}},e._l(this.$store.state.layers,(function(e){return a("AppLayer",{key:e.id,attrs:{layer:e}})})),1)],1)},ne=[],re=(a("2af1"),a("362d")),ie=a.n(re),se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layer",{ref:"layer",attrs:{config:e.config}},[e.layer.enabled&&e.layer.complete?a("v-image",{attrs:{config:{image:e.layer.image}}}):e._e()],1)},ce=[],le=function(e){function t(){return Object(l["a"])(this,t),Object(f["a"])(this,Object(u["a"])(t).apply(this,arguments))}return Object(g["a"])(t,e),Object(p["a"])(t,[{key:"resetLayer",value:function(e){e&&(this.konvaLayer.position({x:0,y:0}),this.$store.commit("changeLayerKey",{layer:this.layer,key:"requestReset",value:!1}),this.konvaLayer.batchDraw())}},{key:"konvaLayer",get:function(){return this.$refs.layer.getNode()}},{key:"requestReset",get:function(){return this.layer.requestReset}},{key:"config",get:function(){return{opacity:this.layer.opacity,offset:this.layer.offset,draggable:this.layer.draggable,listening:this.layer.draggable}}}]),t}(b["c"]);d["a"]([Object(b["b"])()],le.prototype,"layer",void 0),d["a"]([Object(b["d"])("requestReset")],le.prototype,"resetLayer",null),le=d["a"]([Object(b["a"])({components:{}})],le);var pe=le,fe=pe,ue=Object(R["a"])(fe,se,ce,!1,null,"4895696a",null),ge=ue.exports,de=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(f["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.resizeHandle=function(){e.reloadCanvas()},e.MAX_ZOOM_SCALE=4,e.MIN_ZOOM_SCALE=.3,e}return Object(g["a"])(t,e),Object(p["a"])(t,[{key:"mounted",value:function(){window.addEventListener("resize",this.resizeHandle),this.addPinchZoom(),this.reloadCanvas()}},{key:"updated",value:function(){this.reloadCanvas()}},{key:"beforeDestory",value:function(){window.removeEventListener("resize",this.resizeHandle)}},{key:"addPinchZoom",value:function(){var e=this;function t(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}ie.a.hitOnDragEnabled=!0;window.innerWidth,window.innerHeight;var a=0,o={x:1,y:1};this.konva.on("touchmove",(function(n){n.evt.preventDefault();var r=n.evt.touches[0],i=n.evt.touches[1];if(r&&i){var s=r.clientX,c=r.clientY,l=i.clientX,p=i.clientY,f=t({x:s,y:c},{x:l,y:p}),u={x:(s+l)/2,y:(c+p)/2};0===a&&(a=f,o=e.getRelativePointerPosition(e.konva,u));var g=e.konva.scaleX()*(f/a);g=Math.max(e.MIN_ZOOM_SCALE,Math.min(e.MAX_ZOOM_SCALE,g)),e.konva.scaleX(g),e.konva.scaleY(g);var d=e.getRelativePointerPosition(e.konva,u),b=e.konva.offsetX(),h=e.konva.offsetY();e.konva.offset({x:b+(o.x-d.x),y:h+(o.y-d.y)}),e.konva.batchDraw(),d=e.getRelativePointerPosition(e.konva,u),e.offset=e.konva.offset(),e.scale=g,a=f,o=d}})),this.konva.on("touchend",(function(){a=0}))}},{key:"reloadCanvas",value:function(){this.$store.commit("changeCanvasSize",{x:this.$el.clientWidth,y:this.$el.clientHeight}),this.map&&this.layers&&this.layers[0]&&(this.konva.scale({x:this.scale,y:this.scale}),this.konva.offset(this.offset),this.konva.draw())}},{key:"resizeCanva",value:function(e){var t=this.getRelativePointerPosition(this.konva);this.konva.scale({x:e,y:e}),this.scale=this.konva.scaleX();var a=this.konva.offsetX(),o=this.konva.offsetY(),n=this.getRelativePointerPosition(this.konva);this.konva.offset({x:a-n.x+t.x,y:o-n.y+t.y}),this.konva.draw(),this.offset=this.konva.offset()}},{key:"onZoom",value:function(e){var t=Math.sign(e.deltaY),a=1-.1*t;a*=this.scale,a=Math.max(this.MIN_ZOOM_SCALE,Math.min(this.MAX_ZOOM_SCALE,a)),this.resizeCanva(a)}},{key:"getRelativePointerPosition",value:function(e,t){var a=e.getAbsoluteTransform().copy();a.invert(),t||(t=e.getStage().getPointerPosition());var o=a.point(t);return o}},{key:"konvaConfig",get:function(){return{width:this.$store.state.width,height:this.$store.state.height,draggable:this.$store.state.draggable}}},{key:"konva",get:function(){return this.$refs.konva.getNode()}},{key:"map",get:function(){return this.$store.state.map}},{key:"layers",get:function(){return this.$store.state.layers}},{key:"scale",get:function(){return this.$store.state.scale},set:function(e){this.$store.commit("changeScale",e)}},{key:"offset",get:function(){return this.$store.state.offset},set:function(e){this.$store.commit("changeOffset",e)}}]),t}(b["c"]);de=d["a"]([Object(b["a"])({components:{AppLayer:ge}})],de);var be=de,he=be,me=Object(R["a"])(he,oe,ne,!1,null,"3b2a9f59",null),ve=me.exports,je=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(f["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.heightVar=.01*window.innerHeight,e}return Object(g["a"])(t,e),Object(p["a"])(t,[{key:"mounted",value:function(){var e=this;window.addEventListener("resize",(function(){e.heightVar=.01*window.innerHeight}));var t=this.$i18n.messages,a=function(){if(!navigator)return"en";if(window.localStorage.locale)return window.localStorage.locale;var e=Object.keys(t).find((function(e){return navigator.language.toLowerCase().startsWith(e.toLowerCase())}));return window.localStorage.locale=e,e}();this.$i18n.locale=a}}]),t}(b["c"]);je=d["a"]([Object(b["a"])({components:{AppNav:ae,AppMap:ve}})],je);var ye=je,ke=ye,xe=(a("5c0b"),Object(R["a"])(ke,s,c,!1,null,null,null)),Oe=xe.exports,we=a("9483");Object(we["a"])("".concat("/R6OB/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var _e=a("8c4f");o["default"].use(_e["a"]);var Ce=[],$e=new _e["a"]({routes:Ce}),Me=$e,Le=(a("a4d3"),a("e01a"),a("d28b"),a("a15b9"),a("3ca3"),a("2f62"));function Re(e){var t=new Image;return t.src=e,t}function Se(e){var t,a=Re(e.image),o=[];return e.layers&&(o=e.layers.map((function(a){var o=Se(a);return o.id=[e.id,o.id].join("."),o.parent=t,o}))),t={id:e.id,mapid:e.mapid,enabled:!1,requestReset:!1,image:a,complete:!1,draggable:!1,opacity:1,offset:{x:0,y:0},childs:o,parent:null},t}o["default"].use(Le["a"]);var Pe=new Le["a"].Store({state:{map:null,layers:[],width:100,height:100,scale:1,draggable:!0,offset:{x:0,y:0}},mutations:{changeMap:function(e,t){e.map=t},changeCanvasSize:function(e,t){e.width=t.x,e.height=t.y},changeScale:function(e,t){"number"===typeof t&&(e.scale=t)},changeOffset:function(e,t){e.offset=t},clearConfig:function(e){e.scale=1,e.offset={x:0,y:0},e.draggable=!0},changeDraggable:function(e,t){e.draggable=t},addLayer:function(e,t){e.layers.push(t)},clearLayers:function(e){e.layers=[]},resetLayer:function(e,t){},toggleLayer:function(e,t){t.layer?t.layer.enabled=t.enabled:t.enabled=!t.enabled},changeLayerOpacity:function(e,t){var a=t.layer,o=t.opacity;a.opacity=o},changeLayerOffset:function(e,t){var a=t.layer,o=t.offset;a.offset=o},changeLayerKey:function(e,t){var a=t.layer,o=t.key,n=t.value;a[o]=n}},actions:{updateMap:function(e,t){var a=e.state,o=e.commit;if(t){var n=null===a.map;o("clearLayers"),o("changeMap",t);var r=!0,i=!0,s=!1,c=void 0;try{for(var l,p=function(){var e=l.value,t=Se(e);r?(t.image.onload=function(){t.enabled=!0,t.complete=!0,n&&(o("changeScale",a.width/a.layers[0].image.naturalWidth),n=!1)},r=!1):t.image.onload=function(){t.complete=!0},o("addLayer",t)},f=t.floors[Symbol.iterator]();!(i=(l=f.next()).done);i=!0)p()}catch(u){s=!0,c=u}finally{try{i||null==f.return||f.return()}finally{if(s)throw c}}}}},modules:{}}),Ee=a("a925");function Ae(){var e=a("49f8"),t={};return e.keys().forEach((function(a){var o=a.match(/([A-Za-z0-9-_]+)\./i);if(o&&o.length>1){var n=o[1];t[n]=e(a)}})),t}o["default"].use(Ee["a"]);var ze=Ae(),Ne=new Ee["a"]({locale:"en",fallbackLocale:"en",messages:ze});o["default"].use(n["a"],{defaultIconPack:"fa"}),o["default"].use(i.a),o["default"].config.productionTip=!1,new o["default"]({router:Me,store:Pe,i18n:Ne,render:function(e){return e(Oe)}}).$mount("#app")},ce07:function(e,t,a){e.exports=a.p+"img/2.4771be5a.jpg"},d2f8:function(e,t,a){e.exports=a.p+"img/3.eb04c444.jpg"},d48f:function(e,t,a){e.exports=a.p+"img/4.ee293222.jpg"},d491:function(e,t,a){"use strict";var o=a("7fd3"),n=a.n(o);n.a},d712:function(e,t,a){e.exports=a.p+"img/5.73630bf9.jpg"},d8ca:function(e,t,a){e.exports=a.p+"img/1.98c19ffe.jpg"},da1e:function(e,t,a){e.exports=a.p+"img/2.15a64b84.jpg"},dc4a:function(e,t,a){e.exports=a.p+"img/1.0dc236c6.jpg"},dcf0:function(e,t,a){e.exports=a.p+"img/1.bf768fed.jpg"},dfa1:function(e,t,a){e.exports=a.p+"img/1.aa6087bd.jpg"},e10e:function(e,t,a){e.exports=a.p+"img/2.8bc9d8b7.jpg"},eb04:function(e,t,a){e.exports=a.p+"img/1.c42d4d4e.jpg"},edd4:function(e){e.exports=JSON.parse('{"lang":"English","tip":{"nomap":"Click top-left button to choose a map."},"map":{"bank":{"name":"Bank","floors":["-1","1","2","Roof"]},"bartlett":{"name":"Bartlett U.","floors":["1","2","Roof"]},"border":{"name":"Border","floors":["1","2","Roof"]},"chalet":{"name":"Chalet","floors":["-1","1","2","Roof"]},"clubhouse":{"name":"Club House","floors":["-1","1","2","Roof"]},"coastline":{"name":"Coastline","floors":["1","2","Roof"]},"consulate":{"name":"Consulate","floors":["-1","1","2","Roof"]},"favela":{"name":"Favela","floors":["Shop","1","2","3","Roof"]},"fortress":{"name":"Fortress","floors":["1","2","3","Roof"]},"hereford":{"name":"Hereford","floors":["1","2","3","4","Roof"]},"house":{"name":"House","floors":["-1","1","2","Roof"]},"kafe":{"name":"Kafe Dostoyevsky","floors":["1","2","3","Roof"]},"kanal":{"name":"Kanal","floors":["Tunnel","1","2","3","Roof"]},"oregon":{"name":"Oregon","floors":["1","2","3","4","Roof"]},"outback":{"name":"Outback","floors":["1","2","Roof"]},"plane":{"name":"Presidential Plane","floors":["1","2","3","Roof"]},"skyscraper":{"name":"Skyscraper","floors":["1","2","Roof"]},"themepark":{"name":"Theme Park","floors":["1","2","Roof"]},"tower":{"name":"Tower","floors":["1","2","3","4","Roof"]},"villa":{"name":"Villa","floors":["-1","1","2","Roof"]},"yacht":{"name":"Yacht","floors":["1","2","3","4","Roof"]}}}')},ee3e:function(e,t,a){e.exports=a.p+"img/2.f37f44ce.jpg"},f36e:function(e,t,a){e.exports=a.p+"img/1.3b1b9ae3.jpg"},f68b:function(e,t,a){e.exports=a.p+"img/2.4172a145.jpg"},fa78:function(e,t,a){e.exports=a.p+"img/2.ba150ad4.jpg"},fe53:function(e,t,a){e.exports=a.p+"img/1.030cef32.jpg"}});
//# sourceMappingURL=app.cff2f00e.js.map